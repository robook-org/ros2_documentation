<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deploying on IBM Cloud Kubernetes [community-contributed] &mdash; ROS 2 Documentation: Humble  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://ros2docs.robook.org/humble/Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using Eclipse Oxygen with rviz2 [community-contributed]" href="Eclipse-Oxygen-with-ROS-2-and-rviz2.html" />
    <link rel="prev" title="杂项" href="../Miscellaneous.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ROS 2 Documentation: Humble
              <img src="../../_static/humble-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">安装</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Install-Debs.html">Ubuntu (deb packages)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Windows-Install-Binary.html">Windows (binary)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/RHEL-Install-RPMs.html">RHEL (RPM packages)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Alternatives.html">Alternatives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Development-Setup.html">Ubuntu (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Install-Binary.html">Ubuntu (binary)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Windows-Development-Setup.html">Windows (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Development-Setup.html">RHEL (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Install-Binary.html">RHEL (binary)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/macOS-Development-Setup.html">macOS (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Fedora-Development-Setup.html">Fedora (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Latest-Development-Setup.html">Latest development (source)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Maintaining-a-Source-Checkout.html">Maintain source checkout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Testing.html">Testing with pre-release binaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/DDS-Implementations.html">DDS implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Connext security plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connext DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Eclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">eProsima Fast DDS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Releases.html">发行版</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Jazzy-Jalisco.html">Jazzy Jalisco (<code class="docutils literal notranslate"><span class="pre">jazzy</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Jazzy-Jalisco-Complete-Changelog.html">Jazzy Jalisco changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Iron-Irwini.html">Iron Irwini (<code class="docutils literal notranslate"><span class="pre">iron</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Iron-Irwini-Complete-Changelog.html">Iron Irwini Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Humble-Hawksbill-Complete-Changelog.html">Humble Hawksbill changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Rolling-Ridley.html">Rolling Ridley (<code class="docutils literal notranslate"><span class="pre">rolling</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Development.html">Development Distribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Kilted-Kaiju.html">Kilted Kaiju (codename ‘kilted’; May, 2025)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/End-of-Life.html">End-of-Life Distributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Galactic-Geochelone.html">Galactic Geochelone (<code class="docutils literal notranslate"><span class="pre">galactic</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Releases/Galactic-Geochelone-Complete-Changelog.html">Galactic Geochelone changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Eloquent-Elusor.html">Eloquent Elusor (<code class="docutils literal notranslate"><span class="pre">eloquent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Dashing-Diademata.html">Dashing Diademata (<code class="docutils literal notranslate"><span class="pre">dashing</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Crystal-Clemmys.html">Crystal Clemmys (<code class="docutils literal notranslate"><span class="pre">crystal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Bouncy-Bolson.html">Bouncy Bolson (<code class="docutils literal notranslate"><span class="pre">bouncy</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Ardent-Apalone.html">Ardent Apalone (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta3-Overview.html">Beta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta2-Overview.html">Beta 2 (<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta1-Overview.html">Beta 1 (<code class="docutils literal notranslate"><span class="pre">Asphalt</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Alpha-Overview.html">Alphas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Process.html">Development process for a release</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Tutorials.html">教程</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Beginner-CLI-Tools.html">初级: 命令行交互工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Configuring-ROS2-Environment.html">配置环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">使用 <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code>, <code class="docutils literal notranslate"><span class="pre">ros2</span></code>, <code class="docutils literal notranslate"><span class="pre">rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">Understanding nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Understanding topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Understanding services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Understanding parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Understanding actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">Using <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> to view logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Launching nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Recording and playing back data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Beginner-Client-Libraries.html">初级: 客户端库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Colcon-Tutorial.html">Using <code class="docutils literal notranslate"><span class="pre">colcon</span></code> to build packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">Creating a workspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">Creating a package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">Writing a simple service and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">Writing a simple service and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">Creating custom msg and srv files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">Implementing custom interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">Using parameters in a class (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">Using parameters in a class (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">Using <code class="docutils literal notranslate"><span class="pre">ros2doctor</span></code> to identify issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Beginner-Client-Libraries/Pluginlib.html">Creating and using plugins (C++)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Intermediate.html">中级教程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Rosdep.html">Managing Dependencies with rosdep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Creating-an-Action.html">Creating an action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Writing-an-Action-Server-Client/Cpp.html">Writing an action server and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Writing-an-Action-Server-Client/Py.html">Writing an action server and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Writing-a-Composable-Node.html">Writing a Composable Node (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Composition.html">Composing multiple nodes in a single process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Monitoring-For-Parameter-Changes-CPP.html">Monitoring for parameter changes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Launch/Launch-Main.html">Launch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Launch/Creating-Launch-Files.html">Creating a launch file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Launch/Launch-system.html">Integrating launch files into ROS 2 packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Launch/Using-Substitutions.html">Using substitutions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Launch/Using-Event-Handlers.html">Using event handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">Managing large projects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Tf2/Tf2-Main.html"><code class="docutils literal notranslate"><span class="pre">tf2</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Introduction-To-Tf2.html">Introducing <code class="docutils literal notranslate"><span class="pre">tf2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">Writing a static broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">Writing a static broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">Writing a broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">Writing a broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">Writing a listener (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">Writing a listener (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Adding-A-Frame-Py.html">Adding a frame (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Adding-A-Frame-Cpp.html">Adding a frame (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">Using time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">Traveling in time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Debugging-Tf2-Problems.html">Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Quaternion-Fundamentals.html">Quaternion fundamentals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">Using stamped datatypes with <code class="docutils literal notranslate"><span class="pre">tf2_ros::MessageFilter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/Testing/Testing-Main.html">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Testing/CLI.html">Running Tests in ROS 2 from the Command Line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Testing/Cpp.html">Writing Basic Tests with C++ with GTest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Testing/Python.html">Writing Basic Tests with Python</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/Testing/BuildFarmTesting.html">Testing Your Code with the ROS Build Farm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">Building a visual robot model from scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">Building a movable robot model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">Adding physical and collision properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">Using Xacro to clean up your code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">Using URDF with <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/URDF/Exporting-an-URDF-File.html">Generating an URDF File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Intermediate/RViz/RViz-Main.html">RViz</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/RViz/RViz-User-Guide/RViz-User-Guide.html">RViz User Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Intermediate/RViz/RViz-Custom-Display/RViz-Custom-Display.html">Building a Custom RViz Display</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Advanced.html">高级教程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">Enabling topic statistics (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Discovery-Server/Discovery-Server.html">Using Fast DDS Discovery Server as discovery protocol [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Allocator-Template-Tutorial.html">Implementing a custom memory allocator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/FastDDS-Configuration.html">Unlocking the potential of Fast DDS middleware [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Recording-A-Bag-From-Your-Own-Node-CPP.html">Recording a bag from a node (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html">Recording a bag from a node (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/ROS2-Tracing-Trace-and-Analyze.html">How to use ros2_tracing to trace and analyze an application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Reading-From-A-Bag-File-CPP.html">Reading from a bag file (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Simulators/Simulation-Main.html">Simulators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Simulators/Webots/Simulation-Webots.html">Webots</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Installation-Ubuntu.html">Installation (Ubuntu)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Installation-Windows.html">Installation (Windows)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Installation-MacOS.html">Installation (macOS)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Basic.html">Setting up a robot simulation (Basic)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Advanced.html">Setting up a robot simulation (Advanced)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Simulation-Supervisor.html">The Ros2Supervisor Node</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Webots/Simulation-Reset-Handler.html">Setting up a Reset Handler</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Simulators/Gazebo/Simulation-Gazebo.html">Gazebo</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../Advanced/Simulators/Gazebo/Gazebo.html">Setting up a robot simulation (Gazebo)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced/Security/Security-Main.html">Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Security/Introducing-ros2-security.html">Setting up security</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Security/The-Keystore.html">Understanding the security keystore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Security/Security-on-Two.html">Ensuring security across machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Security/Examine-Traffic.html">Examining network traffic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Security/Access-Controls.html">Setting access controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Advanced/Security/Deployment-Guidelines.html">Deployment Guidelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Demos.html">Demos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Quality-of-Service.html">Using quality-of-service settings for lossy networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Managed-Nodes.html">Managing nodes with managed lifecycles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Intra-Process-Communication.html">Setting up efficient intra-process communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Rosbag-with-ROS1-Bridge.html">Recording and playing back data with <code class="docutils literal notranslate"><span class="pre">rosbag</span></code> using the ROS 1 bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Real-Time-Programming.html">Understanding real-time programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/dummy-robot-demo.html">Experimenting with a dummy robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Logging-and-logger-configuration.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Demos/Content-Filtering-Subscription.html">Creating a content filtering subscription</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../Miscellaneous.html">杂项</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Deploying on IBM Cloud Kubernetes [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Using Eclipse Oxygen with <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Building a real-time Linux kernel [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="Building-ROS2-Package-with-eclipse-2021-06.html">Building a package with Eclipse 2021-06</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../How-To-Guides.html">应用指南</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html">Installation troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Developing-a-ROS-2-Package.html">开发一个 ROS 2 包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Documenting-a-ROS-2-Package.html">Documenting a ROS 2 package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Documentation.html">ament_cmake user documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Python-Documentation.html">ament_cmake_python user documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1.html">Migrating from ROS 1 to ROS 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-Packages.html">Migrating Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-Interfaces.html">Migrating Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-CPP-Packages.html">Migrating C++ Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-Python-Packages.html">Migrating Python Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-Launch-Files.html">Migrating Launch Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-Parameters.html">Migrating Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Migrating-from-ROS1/Migrating-Scripts.html">Migrating Scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-file-different-formats.html">Using Python, XML, and YAML for ROS 2 Launch Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launching-composable-nodes.html">Using ROS 2 launch to launch composable nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Node-arguments.html">Passing ROS arguments to nodes via the command-line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Sync-Vs-Async.html">Synchronous vs. asynchronous service clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/DDS-tuning.html">DDS tuning information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2: Overriding QoS Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Working-with-multiple-RMW-implementations.html">Working with multiple ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Cross-compilation.html">Cross-compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Releasing/Releasing-a-Package.html">Releasing a Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Index-Your-Packages.html">Index Your Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/First-Time-Release.html">First Time Release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Subsequent-Releases.html">Subsequent Releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Team-Repository.html">Release Team / Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Track.html">Release Track</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Python-Packages.html">Using Python Packages with ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Port-Plugin-Windows.html">Porting RQt plugins to Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">Running ROS 2 nodes in Docker [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Visualizing-ROS-2-Data-With-Foxglove-Studio.html">Visualizing ROS 2 data with Foxglove Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Core-maintainer-guide.html">ROS 2 Core Maintainer Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-a-Custom-Deb-Package.html">Building a custom deb package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-ROS-2-with-Tracing-Instrumentation.html">Building ROS 2 with tracing instrumentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Topics-Services-Actions.html">Topics vs Services vs Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Variants.html">Using variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros2-param.html">Using the <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span></code> command-line tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros1_bridge-Jammy-upstream.html">Using <code class="docutils literal notranslate"><span class="pre">ros1_bridge</span></code> with upstream ROS on Ubuntu 22.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Configure-ZeroCopy-loaned-messages.html">Configure Zero Copy Loaned Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installing-on-Raspberry-Pi.html">ROS 2 on Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-callback-groups.html">Using Callback Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Getting-Backtraces-in-ROS-2.html">Getting Backtraces in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/ROS-2-IDEs.html">IDEs and Debugging [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Setup-ROS-2-with-VSCode-and-Docker-Container.html">Setup ROS 2 with VSCode and Docker [community-contributed]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Custom-Rosdistro.html">Using Custom Rosdistro Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install.html">Building RQt from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-MacOS.html">Building RQt from source on macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-Windows10.html">Building RQt from source on Windows 10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Concepts.html">概念</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/Basic.html">基础概念</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Nodes.html">节点(Node)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Discovery.html">发现(Discovery)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Interfaces.html">接口(Interfaces)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Topics.html">Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Services.html">服务(Services)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Actions.html">Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Parameters.html">参数(Parameters)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Command-Line-Tools.html">使用命令行工具解析数据(Introspection)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Launch.html">启动(Launch)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Basic/About-Client-Libraries.html">客户端库(Client libraries)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/Intermediate.html">中级概念</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Domain-ID.html">The ROS_DOMAIN_ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Different-Middleware-Vendors.html">Different ROS 2 middleware vendors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Logging.html">日志系统配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Quality-of-Service-Settings.html">Quality of Service settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Executors.html">Executors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Topic-Statistics.html">Topic statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-RQt.html">Overview and usage of RQt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Composition.html">Composition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Cross-Compilation.html">Cross-compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Security.html">ROS 2 Security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Intermediate/About-Tf2.html">Tf2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/Advanced.html">高级概念</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Advanced/About-Build-System.html">The build system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Advanced/About-Internal-Interfaces.html">Internal ROS 2 interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Concepts/Advanced/About-Middleware-Implementations.html">ROS 2 middleware implementations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contact.html">联系我们</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../The-ROS2-Project.html">ROS 2 项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../The-ROS2-Project/Contributing/Developer-Guide.html">ROS 2 developer guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../The-ROS2-Project/Contributing/Code-Style-Language-Versions.html">Code style and language versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../The-ROS2-Project/Contributing/Quality-Guide.html">Quality guide: ensuring code quality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../The-ROS2-Project/Contributing/Build-Farms.html">ROS Build Farms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../The-ROS2-Project/Contributing/Windows-Tips-and-Tricks.html">Windows Tips and Tricks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../The-ROS2-Project/Contributing/Contributing-To-ROS-2-Documentation.html">Contributing to ROS 2 Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Features.html">Features Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Feature-Ideas.html">Feature Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Roadmap.html">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/ROSCon-Content.html">ROSCon Talks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Governance.html">Project Governance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Marketing.html">Marketing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../The-ROS2-Project/Metrics.html">Metrics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Package-Docs.html">相关包文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Related-Projects.html">相关项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Intel-ROS2-Projects.html">Intel ROS 2 Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Nvidia-ROS2-Projects.html">NVIDIA ROS 2 Projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Citations.html">引用本项目</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS 2 Documentation: Humble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../Tutorials.html">教程</a></li>
          <li class="breadcrumb-item"><a href="../Miscellaneous.html">杂项</a></li>
      <li class="breadcrumb-item active">Deploying on IBM Cloud Kubernetes [community-contributed]</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/robook-org/ros2_documentation/blob/humble/source/Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <section id="deploying-on-ibm-cloud-kubernetes-community-contributed">
<h1>Deploying on IBM Cloud Kubernetes [community-contributed]<a class="headerlink" href="#deploying-on-ibm-cloud-kubernetes-community-contributed" title="Link to this heading"></a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#about" id="id1">About</a></p></li>
<li><p><a class="reference internal" href="#ros-2-on-ibm-cloud" id="id2">ROS 2 on IBM Cloud</a></p></li>
<li><p><a class="reference internal" href="#step-1-setting-up-your-system" id="id3">Step 1: Setting up your system</a></p>
<ul>
<li><p><a class="reference internal" href="#a-docker-files" id="id4">a) Docker files?</a></p></li>
<li><p><a class="reference internal" href="#b-ros-2-image" id="id5">b) ROS 2 Image</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#step-2-running-the-image-on-ibm-cloud" id="id6">Step 2: Running the image on IBM Cloud</a></p></li>
<li><p><a class="reference internal" href="#step-3-using-custom-ros-2-packages" id="id7">Step 3: Using Custom ROS 2 Packages</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-deleting-docker-images" id="id8">Extra: Deleting Docker Images</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#step-4-kubernetes" id="id9">Step 4: Kubernetes</a></p>
<ul>
<li><p><a class="reference internal" href="#a-creating-the-cluster" id="id10">a) Creating the Cluster</a></p></li>
<li><p><a class="reference internal" href="#b-deploying-your-docker-image-finally" id="id11">b) Deploying your Docker Image <em>Finally!</em></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#step-5-using-cli-for-your-docker-image" id="id12">Step 5: Using CLI for your Docker Image</a></p></li>
<li><p><a class="reference internal" href="#final-remarks" id="id13">Final Remarks</a></p></li>
</ul>
</nav>
<section id="about">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">About</a><a class="headerlink" href="#about" title="Link to this heading"></a></h2>
<p>This article describes how to get ROS 2 running on IBM Cloud using Docker files. It first gives a brief overview of docker images and how they work locally and then explores IBM Cloud and how the user can deploy their containers on it.
Afterwards, a short description of how the user can use their own custom packages for ROS 2 from github on IBM Cloud is provided.
A walkthrough of how to create a cluster and utilize Kubernetes on IBM Cloud is provided and finally the Docker image is deployed on the cluster.
Originally published <a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud">here</a> and <a class="reference external" href="https://medium.com/&#64;mahmoud-nasr/running-ros2-on-ibm-cloud-1b1284cbd487">here</a>.</p>
</section>
<section id="ros-2-on-ibm-cloud">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">ROS 2 on IBM Cloud</a><a class="headerlink" href="#ros-2-on-ibm-cloud" title="Link to this heading"></a></h2>
<p>In this tutorial, we show how you can easily integrate and run ROS 2 on
IBM Cloud with your custom packages.</p>
<p>ROS 2 is the new generation of ROS which gives more control over
multi-robot formations. With the advancements of cloud computing, cloud
robotics are becoming more important in today’s age. In this tutorial,
we will go through a short introduction on running ROS 2 on IBM Cloud. By
the end of the tutorial, you will be able to create your own packages in
ROS 2 and deploy them to the cloud using docker files.</p>
<p>The following instructions assume you’re using Linux and have been
tested with Ubuntu 18.04 (Bionic Beaver).</p>
</section>
<section id="step-1-setting-up-your-system">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Step 1: Setting up your system</a><a class="headerlink" href="#step-1-setting-up-your-system" title="Link to this heading"></a></h2>
<p>Before we go into how the exact process works, lets first make sure all
the required software is properly installed. We’ll point you towards the
appropriate sources to set up your system and only highlight the details
that pertain to our use-case.</p>
<section id="a-docker-files">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">a) Docker files?</a><a class="headerlink" href="#a-docker-files" title="Link to this heading"></a></h3>
<p>Docker files are a form of containers that can run separate from your
system, this way, you can set-up potentially hundreds of different
projects without affecting one another. You can even set-up different
versions of Linux on one machine, without the need for virtual machine.
Docker files have an advantage of saving space and only utilizing your
system resources when running. In addition, dockers are versatile and
transferable. They contain all the required pre-requisites to run
separately, meaning that you can easily use a docker file for a specific
system or service without any cubersome steps!</p>
<p>Excited yet? Let’s start off by installing docker to your system by
following the following <a class="reference external" href="https://docs.docker.com/get-docker/">link</a>.
From the tutorial, you should have done some sanity checks to make sure
docker is properly set-up. Just in case, however, let’s run the
following command once again that uses the hello-world docker image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>hello-world
</pre></div>
</div>
<p>You should obtain the following output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Hello<span class="w"> </span>from<span class="w"> </span>Docker!
This<span class="w"> </span>message<span class="w"> </span>shows<span class="w"> </span>that<span class="w"> </span>your<span class="w"> </span>installation<span class="w"> </span>appears<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>working<span class="w"> </span>correctly.

To<span class="w"> </span>generate<span class="w"> </span>this<span class="w"> </span>message,<span class="w"> </span>Docker<span class="w"> </span>took<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>steps:
<span class="w"> </span><span class="m">1</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>client<span class="w"> </span>contacted<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>daemon.
<span class="w"> </span><span class="m">2</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w"> </span>pulled<span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;hello-world&quot;</span><span class="w"> </span>image<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>Hub.
<span class="w">    </span><span class="o">(</span>amd64<span class="o">)</span>
<span class="w"> </span><span class="m">3</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w"> </span>created<span class="w"> </span>a<span class="w"> </span>new<span class="w"> </span>container<span class="w"> </span>from<span class="w"> </span>that<span class="w"> </span>image<span class="w"> </span>which<span class="w"> </span>runs<span class="w"> </span>the
<span class="w">    </span>executable<span class="w"> </span>that<span class="w"> </span>produces<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>currently<span class="w"> </span>reading.
<span class="w"> </span><span class="m">4</span>.<span class="w"> </span>The<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w"> </span>streamed<span class="w"> </span>that<span class="w"> </span>output<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>Docker<span class="w"> </span>client,<span class="w"> </span>which<span class="w"> </span>sent<span class="w"> </span>it
<span class="w">    </span>to<span class="w"> </span>your<span class="w"> </span>terminal.

To<span class="w"> </span>try<span class="w"> </span>something<span class="w"> </span>more<span class="w"> </span>ambitious,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>run<span class="w"> </span>an<span class="w"> </span>Ubuntu<span class="w"> </span>container<span class="w"> </span>with:
<span class="w"> </span>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>ubuntu<span class="w"> </span>bash

Share<span class="w"> </span>images,<span class="w"> </span>automate<span class="w"> </span>workflows,<span class="w"> </span>and<span class="w"> </span>more<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>free<span class="w"> </span>Docker<span class="w"> </span>ID:
<span class="w"> </span>https://hub.docker.com/

For<span class="w"> </span>more<span class="w"> </span>examples<span class="w"> </span>and<span class="w"> </span>ideas,<span class="w"> </span>visit:
<span class="w"> </span>https://docs.docker.com/get-started/
</pre></div>
</div>
</section>
<section id="b-ros-2-image">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">b) ROS 2 Image</a><a class="headerlink" href="#b-ros-2-image" title="Link to this heading"></a></h3>
<p>ROS
<a class="reference external" href="https://discourse.ros.org/t/announcing-official-docker-images-for-ros2/7381/2">announced</a>
image containers for several ROS distributions in January 2019. More
detailed instructions on the use of ROS 2 docker images can be found
<a class="reference external" href="https://hub.docker.com/_/ros/">here</a>.</p>
<p>Let’s skip through that and get to real-deal right away; creating a
local ROS 2 docker. We’ll create our own Dockerfile (instead of using a
ready Image) since we’ll need this method for deployment on IBM Cloud.
First, we create a new directory which will hold our Dockerfile and any
other files we need later on and navigate to it. Using your favorite
$EDITOR of choice, open a new file named <em>Dockerfile</em> (make sure the
file naming is correct):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mkdir<span class="w"> </span>~/ros2_docker

$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/ros2_docker

$<span class="w"> </span><span class="nv">$EDITOR</span><span class="w"> </span>Dockerfile
</pre></div>
</div>
<p>Insert the following in the <em>Dockerfile</em>, and save it (also found
<a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/blob/main/dockers/ros2_basic/Dockerfile">here</a>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>FROM<span class="w"> </span>ros:foxy

<span class="c1"># install ros package</span>
RUN<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>ros-<span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span>-demo-nodes-cpp<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>ros-<span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span>-demo-nodes-py<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>mkdir<span class="w"> </span>/ros2_home

WORKDIR<span class="w"> </span>/ros2_home

<span class="c1"># launch ros package</span>
CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;ros2&quot;</span>,<span class="w"> </span><span class="s2">&quot;launch&quot;</span>,<span class="w"> </span><span class="s2">&quot;demo_nodes_cpp&quot;</span>,<span class="w"> </span><span class="s2">&quot;talker_listener.launch.py&quot;</span><span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>FROM</strong>: creates a layer from the ros:foxy Docker image</p></li>
<li><p><strong>RUN</strong>: builds your container by installing vim into it and creating
a directory called /ros2_home</p></li>
<li><p><strong>WORKDIR</strong>: informs the container where the working directory should
be for it</p></li>
</ul>
<p>Of course, you are free to change the ROS distribution (<em>foxy</em> is used
here) or change the directory name. The above docker file sets up
ROS-foxy and installs the demo nodes for C++ and Python. Then it
launches a file which runs a talker and a listener node. We will see it
in action in just a few, but they act very similar to the
publisher-subscriber example found in the <a class="reference external" href="https://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29">ROS
wiki</a></p>
<p>Now, we are ready to build the docker image to run ROS 2 in it (yes, it
is THAT easy!).</p>
<p><strong>Note</strong>: if you have errors due to insufficient privileges or
<em>permission denied</em>, try running the command with <em>sudo</em> privileges:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>.

<span class="c1"># You will see a bunch of lines that execute the docker file instructions followed by:</span>
Successfully<span class="w"> </span>built<span class="w"> </span>0dc6ce7cb487
</pre></div>
</div>
<p><em>0dc6ce7cb487</em> will most probably be different for you, so keep note of
it and copy it somewhere for reference. You can always go back and check
the docker images you have on your system using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>docker<span class="w"> </span>ps<span class="w"> </span>-as
</pre></div>
</div>
<p>Now, run the docker file using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>0dc6ce7cb487
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>launch<span class="o">]</span>:<span class="w"> </span>All<span class="w"> </span>log<span class="w"> </span>files<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>found<span class="w"> </span>below<span class="w"> </span>/root/.ros/log/2020-10-28-02-41-45-177546-0b5d9ed123be-1
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>launch<span class="o">]</span>:<span class="w"> </span>Default<span class="w"> </span>logging<span class="w"> </span>verbosity<span class="w"> </span>is<span class="w"> </span><span class="nb">set</span><span class="w"> </span>to<span class="w"> </span>INFO
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker-1<span class="o">]</span>:<span class="w"> </span>process<span class="w"> </span>started<span class="w"> </span>with<span class="w"> </span>pid<span class="w"> </span><span class="o">[</span><span class="m">28</span><span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener-2<span class="o">]</span>:<span class="w"> </span>process<span class="w"> </span>started<span class="w"> </span>with<span class="w"> </span>pid<span class="w"> </span><span class="o">[</span><span class="m">30</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852907</span>.249886590<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker<span class="o">]</span>:<span class="w"> </span>Publishing:<span class="w"> </span><span class="s1">&#39;Hello World: 1&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852907</span>.250964490<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener<span class="o">]</span>:<span class="w"> </span>I<span class="w"> </span>heard:<span class="w"> </span><span class="o">[</span>Hello<span class="w"> </span>World:<span class="w"> </span><span class="m">1</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852908</span>.249786312<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker<span class="o">]</span>:<span class="w"> </span>Publishing:<span class="w"> </span><span class="s1">&#39;Hello World: 2&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852908</span>.250453386<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener<span class="o">]</span>:<span class="w"> </span>I<span class="w"> </span>heard:<span class="w"> </span><span class="o">[</span>Hello<span class="w"> </span>World:<span class="w"> </span><span class="m">2</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852909</span>.249882257<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker<span class="o">]</span>:<span class="w"> </span>Publishing:<span class="w"> </span><span class="s1">&#39;Hello World: 3&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852909</span>.250536089<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener<span class="o">]</span>:<span class="w"> </span>I<span class="w"> </span>heard:<span class="w"> </span><span class="o">[</span>Hello<span class="w"> </span>World:<span class="w"> </span><span class="m">3</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852910</span>.249845718<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker<span class="o">]</span>:<span class="w"> </span>Publishing:<span class="w"> </span><span class="s1">&#39;Hello World: 4&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852910</span>.250509355<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener<span class="o">]</span>:<span class="w"> </span>I<span class="w"> </span>heard:<span class="w"> </span><span class="o">[</span>Hello<span class="w"> </span>World:<span class="w"> </span><span class="m">4</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852911</span>.249506058<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker<span class="o">]</span>:<span class="w"> </span>Publishing:<span class="w"> </span><span class="s1">&#39;Hello World: 5&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852911</span>.250152324<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener<span class="o">]</span>:<span class="w"> </span>I<span class="w"> </span>heard:<span class="w"> </span><span class="o">[</span>Hello<span class="w"> </span>World:<span class="w"> </span><span class="m">5</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852912</span>.249556670<span class="o">]</span><span class="w"> </span><span class="o">[</span>talker<span class="o">]</span>:<span class="w"> </span>Publishing:<span class="w"> </span><span class="s1">&#39;Hello World: 6&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">1603852912</span>.250212678<span class="o">]</span><span class="w"> </span><span class="o">[</span>listener<span class="o">]</span>:<span class="w"> </span>I<span class="w"> </span>heard:<span class="w"> </span><span class="o">[</span>Hello<span class="w"> </span>World:<span class="w"> </span><span class="m">6</span><span class="o">]</span>
</pre></div>
</div>
<p>If it works correctly, you should see something similar to what is shown
above. As can be seen, there are two ROS nodes (a publisher and a
subscriber) running and their output is provided to us through ROS INFO.</p>
</section>
</section>
<section id="step-2-running-the-image-on-ibm-cloud">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Step 2: Running the image on IBM Cloud</a><a class="headerlink" href="#step-2-running-the-image-on-ibm-cloud" title="Link to this heading"></a></h2>
<p>The following steps assume you have an IBM cloud account and have
ibmcloud CLI installed. If not, please check this
<a class="reference external" href="https://cloud.ibm.com/docs/cli/reference/ibmcloud/download_cli.html">link</a>
out to get that done first.</p>
<p>We also need to make sure that the CLI plug-in for the IBM Cloud
Container Registry is installed by running the command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>plugin<span class="w"> </span>install<span class="w"> </span>container-registry
</pre></div>
</div>
<p>Afterwards, login to your ibmcloud account through the terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>login<span class="w"> </span>--sso
</pre></div>
</div>
<p>From here, let’s create a container registry name-space. Make sure you
use a unique name that is also descriptive as to what it is. Here, I
used <em>ros2nasr</em>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>cr<span class="w"> </span>namespace-add<span class="w"> </span>ros2nasr
</pre></div>
</div>
<p>IBM cloud has a lot of shortcuts that would help us get our container
onto the cloud right away. The command below builds the container and
tags it with the name <strong>ros2foxy</strong> and the version of <strong>1</strong>. Make sure
you use the correct registry name you created and you are free to change
the container name as you wish. The <strong>.</strong> at the end indicates that the
<em>Dockerfile</em> is in the current directory (and it is important), if not,
change it to point to the directory containing the Dockerfile.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>cr<span class="w"> </span>build<span class="w"> </span>--tag<span class="w"> </span>registry.bluemix.net/ros2nasr/ros2foxy:1<span class="w"> </span>.
</pre></div>
</div>
<p>You can now make sure that the container has been pushed to the registry
you created by running the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>cr<span class="w"> </span>image-list
Listing<span class="w"> </span>images...

REPOSITORY<span class="w">               </span>TAG<span class="w">   </span>DIGEST<span class="w">         </span>NAMESPACE<span class="w">   </span>CREATED<span class="w">         </span>SIZE<span class="w">     </span>SECURITY<span class="w"> </span>STATUS
us.icr.io/ros2nasr/ros2foxy<span class="w">   </span><span class="m">1</span><span class="w">     </span>031be29301e6<span class="w">   </span>ros2nasr<span class="w">    </span><span class="m">36</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">   </span><span class="m">120</span><span class="w"> </span>MB<span class="w">   </span>No<span class="w"> </span>Issues

OK
</pre></div>
</div>
<p>Next, it is important to log-in to your registry to run the docker
image. Again, if you face a <em>permission denied</em> error, perform the
command with sudo privileges. Afterwards, run your docker file as shown
below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>cr<span class="w"> </span>login
Logging<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;registry.ng.bluemix.net&#39;</span>...
Logged<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;registry.ng.bluemix.net&#39;</span>.
Logging<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;us.icr.io&#39;</span>...
Logged<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;us.icr.io&#39;</span>.

OK

$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span>-it<span class="w"> </span>registry.ng.bluemix.net/ros2nasr/ros2foxy:1
</pre></div>
</div>
<p>Where <em>ros2nasr</em> is the name of the registry you created and
<em>ros2foxy:1</em> is the tag of the docker container and the version as
explained previously.</p>
<p>You should now see your docker file running and providing similar output
to that you saw when you ran it locally on your machine.</p>
</section>
<section id="step-3-using-custom-ros-2-packages">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Step 3: Using Custom ROS 2 Packages</a><a class="headerlink" href="#step-3-using-custom-ros-2-packages" title="Link to this heading"></a></h2>
<p>So now we have the full pipeline working, from creating the Dockerfile,
all the way to deploying it and seeing it work on IBM Cloud. But, what
if we want to use a custom set of packages we (or someone else) created?</p>
<p>Well that all has to do with how you set-up your Dockerfile. Lets use
the example provided by ROS 2 <a class="reference external" href="https://hub.docker.com/_/ros/">here</a>.
Create a new directory with a new Dockerfile (or overwrite the existing
one) and add the following in it (or download the file
<a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/blob/main/dockers/git_pkgs_docker/Dockerfile">here</a>)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ARG<span class="w"> </span><span class="nv">FROM_IMAGE</span><span class="o">=</span>ros:foxy
ARG<span class="w"> </span><span class="nv">OVERLAY_WS</span><span class="o">=</span>/opt/ros/overlay_ws

<span class="c1"># multi-stage for caching</span>
FROM<span class="w"> </span><span class="nv">$FROM_IMAGE</span><span class="w"> </span>AS<span class="w"> </span>cacher

<span class="c1"># clone overlay source</span>
ARG<span class="w"> </span>OVERLAY_WS
WORKDIR<span class="w"> </span><span class="nv">$OVERLAY_WS</span>/src
RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\</span>
<span class="s2">repositories: \n\</span>
<span class="s2">  ros2/demos: \n\</span>
<span class="s2">    type: git \n\</span>
<span class="s2">    url: https://github.com/ros2/demos.git \n\</span>
<span class="s2">    version: </span><span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span><span class="s2"> \n\</span>
<span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>../overlay.repos
RUN<span class="w"> </span>vcs<span class="w"> </span>import<span class="w"> </span>./<span class="w"> </span>&lt;<span class="w"> </span>../overlay.repos

<span class="c1"># copy manifests for caching</span>
WORKDIR<span class="w"> </span>/opt
RUN<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/opt<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>find<span class="w"> </span>./<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;package.xml&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>xargs<span class="w"> </span>cp<span class="w"> </span>--parents<span class="w"> </span>-t<span class="w"> </span>/tmp/opt<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>find<span class="w"> </span>./<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;COLCON_IGNORE&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>xargs<span class="w"> </span>cp<span class="w"> </span>--parents<span class="w"> </span>-t<span class="w"> </span>/tmp/opt<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

<span class="c1"># multi-stage for building</span>
FROM<span class="w"> </span><span class="nv">$FROM_IMAGE</span><span class="w"> </span>AS<span class="w"> </span>builder

<span class="c1"># install overlay dependencies</span>
ARG<span class="w"> </span>OVERLAY_WS
WORKDIR<span class="w"> </span><span class="nv">$OVERLAY_WS</span>
COPY<span class="w"> </span>--from<span class="o">=</span>cacher<span class="w"> </span>/tmp/<span class="nv">$OVERLAY_WS</span>/src<span class="w"> </span>./src
RUN<span class="w"> </span>.<span class="w"> </span>/opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rosdep<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--from-paths<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>src/ros2/demos/demo_nodes_cpp<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>src/ros2/demos/demo_nodes_py<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--ignore-src<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*

<span class="c1"># build overlay source</span>
COPY<span class="w"> </span>--from<span class="o">=</span>cacher<span class="w"> </span><span class="nv">$OVERLAY_WS</span>/src<span class="w"> </span>./src
ARG<span class="w"> </span><span class="nv">OVERLAY_MIXINS</span><span class="o">=</span><span class="s2">&quot;release&quot;</span>
RUN<span class="w"> </span>.<span class="w"> </span>/opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>colcon<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--packages-select<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>demo_nodes_cpp<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>demo_nodes_py<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--mixin<span class="w"> </span><span class="nv">$OVERLAY_MIXINS</span>

<span class="c1"># source entrypoint setup</span>
ENV<span class="w"> </span>OVERLAY_WS<span class="w"> </span><span class="nv">$OVERLAY_WS</span>
RUN<span class="w"> </span>sed<span class="w"> </span>--in-place<span class="w"> </span>--expression<span class="w"> </span><span class="se">\</span>
<span class="w">      </span><span class="s1">&#39;$isource &quot;$OVERLAY_WS/install/setup.bash&quot;&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>/ros_entrypoint.sh

<span class="c1"># run launch file</span>
CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;ros2&quot;</span>,<span class="w"> </span><span class="s2">&quot;launch&quot;</span>,<span class="w"> </span><span class="s2">&quot;demo_nodes_cpp&quot;</span>,<span class="w"> </span><span class="s2">&quot;talker_listener.launch.py&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>Going through the lines shown, we can see how we can add custom packages
from github in 4 steps:</p>
<ol class="arabic simple">
<li><p>Create an overlay with custom packages cloned from Github:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ARG<span class="w"> </span>OVERLAY_WS
WORKDIR<span class="w"> </span><span class="nv">$OVERLAY_WS</span>/src
RUN<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\</span>
<span class="s2">repositories: \n\</span>
<span class="s2">  ros2/demos: \n\</span>
<span class="s2">    type: git \n\</span>
<span class="s2">    url: https://github.com/ros2/demos.git \n\</span>
<span class="s2">    version: </span><span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span><span class="s2"> \n\</span>
<span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>../overlay.repos
RUN<span class="w"> </span>vcs<span class="w"> </span>import<span class="w"> </span>./<span class="w"> </span>&lt;<span class="w"> </span>../overlay.repos
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Install package dependencies using rosdep</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install overlay dependencies</span>
ARG<span class="w"> </span>OVERLAY_WS
WORKDIR<span class="w"> </span><span class="nv">$OVERLAY_WS</span>
COPY<span class="w"> </span>--from<span class="o">=</span>cacher<span class="w"> </span>/tmp/<span class="nv">$OVERLAY_WS</span>/src<span class="w"> </span>./src
RUN<span class="w"> </span>.<span class="w"> </span>/opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rosdep<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--from-paths<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>src/ros2/demos/demo_nodes_cpp<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>src/ros2/demos/demo_nodes_py<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--ignore-src<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Build the packages <em>you need</em></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># build overlay source</span>
COPY<span class="w"> </span>--from<span class="o">=</span>cacher<span class="w"> </span><span class="nv">$OVERLAY_WS</span>/src<span class="w"> </span>./src
ARG<span class="w"> </span><span class="nv">OVERLAY_MIXINS</span><span class="o">=</span><span class="s2">&quot;release&quot;</span>
RUN<span class="w"> </span>.<span class="w"> </span>/opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>colcon<span class="w"> </span>build<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--packages-select<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>demo_nodes_cpp<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>demo_nodes_py<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--mixin<span class="w"> </span><span class="nv">$OVERLAY_MIXINS</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Running the launch file</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run launch file</span>
CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;ros2&quot;</span>,<span class="w"> </span><span class="s2">&quot;launch&quot;</span>,<span class="w"> </span><span class="s2">&quot;demo_nodes_cpp&quot;</span>,<span class="w"> </span><span class="s2">&quot;talker_listener.launch.py&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>Likewise, we can change the packages used, install their dependencies,
and then run them.</p>
<p><strong>Back to IBM Cloud</strong></p>
<p>With this Dockerfile, we can follow the same steps we did before to
deploy it on IBM Cloud. Since we already have our registry created, and
we’re logged in to IBM Cloud, we directly build our new Dockerfile.
Notice how I kept the tag the same but changed the version, this way I
can update the docker image created previously. (You are free to create
a completely new one if you want)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>cr<span class="w"> </span>build<span class="w"> </span>--tag<span class="w"> </span>registry.bluemix.net/ros2nasr/ros2foxy:2<span class="w"> </span>.
</pre></div>
</div>
<p>Then, make sure you are logged in to the registry and run the new docker
image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ibmcloud<span class="w"> </span>cr<span class="w"> </span>login
Logging<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;registry.ng.bluemix.net&#39;</span>...
Logged<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;registry.ng.bluemix.net&#39;</span>.
Logging<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;us.icr.io&#39;</span>...
Logged<span class="w"> </span><span class="k">in</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;us.icr.io&#39;</span>.

OK

$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span>-it<span class="w"> </span>registry.ng.bluemix.net/ros2nasr/ros2foxy:2
</pre></div>
</div>
<p>You should see, again, the same output. However, this time we did it
through custom packages from github, which allows us to utilize our
personally created packages for ROS 2 on IBM Cloud.</p>
<section id="extra-deleting-docker-images">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Extra: Deleting Docker Images</a><a class="headerlink" href="#extra-deleting-docker-images" title="Link to this heading"></a></h3>
<p>As you may find yourself in need of deleting a specific docker image(s)
from IBM Cloud, this is how you should go about it!</p>
<ol class="arabic simple">
<li><p>List all the images you have and find all the ones that share the
<em>IMAGE</em> name corresponding to
<em>registry.ng.bluemix.net/ros2nasr/ros2foxy:2</em> (in my case). Then
delete them using their <em>NAMES</em></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w"> </span>your_docker_NAMES
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Delete the docker image from IBM Cloud using its <em>IMAGE</em> name</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>rmi<span class="w"> </span>registry.ng.bluemix.net/ros2nasr/ros2foxy:2
</pre></div>
</div>
</section>
</section>
<section id="step-4-kubernetes">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Step 4: Kubernetes</a><a class="headerlink" href="#step-4-kubernetes" title="Link to this heading"></a></h2>
<section id="a-creating-the-cluster">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">a) Creating the Cluster</a><a class="headerlink" href="#a-creating-the-cluster" title="Link to this heading"></a></h3>
<p>Create a cluster using the Console. The instructions are found
<a class="reference external" href="https://cloud.ibm.com/docs/containers?topic=containers-clusters#clusters_ui">here</a>.
The settings used are detailed below. These are merely suggestions and
can be changed if you need to. However, make sure you understand the
implications of your choices:</p>
<ol class="arabic simple">
<li><p>Plan: <em>Standard</em></p></li>
<li><p>Orchestration Service: <em>Kubernetes v1.18.10</em></p></li>
<li><p>Infrastructure: <em>Classic</em></p></li>
<li><p>Location:</p></li>
</ol>
<ul class="simple">
<li><p>Resource group: <em>Default</em></p></li>
<li><p>Geography: <em>North America</em> (you are free to change this)</p></li>
<li><p>Availability: <em>Single zone</em> (you are free to change this but make
sure you understand the impact of your choices by checking the IBM
Cloud documentation.)</p></li>
<li><p>Worker Zone: <em>Toronto 01</em> (choose the location that is physically
closest to you)</p></li>
</ul>
<ol class="arabic simple" start="5">
<li><p>Worker Pool:</p></li>
</ol>
<ul class="simple">
<li><p>Virtual - shared, Ubuntu 18</p></li>
<li><p>Memory: 16 GB</p></li>
<li><p>Worker nodes per zone: <em>1</em></p></li>
</ul>
<ol class="arabic simple" start="6">
<li><p>Master service endpoint: <em>Both private &amp; public endpoints</em></p></li>
<li><p>Resource details (Totally flexible):</p></li>
</ol>
<ul class="simple">
<li><p>Cluster name: <em>mycluster-tor01-rosibm</em></p></li>
<li><p>Tags: <em>version:1</em></p></li>
</ul>
<p>After you create your cluster, you will be redirected to a page which
details how you can set up the CLI tools and access your cluster. Please
follow these instructions (or check the instructions
<a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/blob/main/Kubernetes-Cluster-Set-up.md">here</a>)and
wait for the progress bar to show that the worker nodes you created are
ready by indicating <em>Normal</em> next to the cluster name. You can also
reach this screen from the IBM Cloud Console inside the Kubernetes.</p>
</section>
<section id="b-deploying-your-docker-image-finally">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">b) Deploying your Docker Image <em>Finally!</em></a><a class="headerlink" href="#b-deploying-your-docker-image-finally" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Create a deployment configuration yaml file named
<em>ros2-deployment.yaml</em> using your favorite $EDITOR and insert the
following in it:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apiVersion:<span class="w"> </span>apps/v1
kind:<span class="w"> </span>Deployment
metadata:
<span class="w">  </span>name:<span class="w"> </span>&lt;deployment&gt;
spec:
<span class="w">  </span>replicas:<span class="w"> </span>&lt;number_of_replicas&gt;
<span class="w">  </span>selector:
<span class="w">    </span>matchLabels:
<span class="w">      </span>app:<span class="w"> </span>&lt;app_name&gt;
<span class="w">  </span>template:
<span class="w">    </span>metadata:
<span class="w">      </span>labels:
<span class="w">        </span>app:<span class="w"> </span>&lt;app_name&gt;
<span class="w">    </span>spec:
<span class="w">      </span>containers:
<span class="w">      </span>-<span class="w"> </span>name:<span class="w"> </span>&lt;app_name&gt;
<span class="w">        </span>image:<span class="w"> </span>&lt;region&gt;.icr.io/&lt;namespace&gt;/&lt;image&gt;:&lt;tag&gt;
</pre></div>
</div>
<p>You should replace the tags shown between <em>“&lt;” “&gt;”</em> as described
<a class="reference external" href="https://cloud.ibm.com/docs/containers?topic=containers-images#namespace">here</a>.
The file in my case would look something like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apiVersion:<span class="w"> </span>apps/v1
kind:<span class="w"> </span>Deployment
metadata:
<span class="w">  </span>name:<span class="w"> </span>ros2-deployment
spec:
<span class="w">  </span>replicas:<span class="w"> </span><span class="m">1</span>
<span class="w">  </span>selector:
<span class="w">    </span>matchLabels:
<span class="w">      </span>app:<span class="w"> </span>ros2-ibmcloud
<span class="w">  </span>template:
<span class="w">    </span>metadata:
<span class="w">      </span>labels:
<span class="w">        </span>app:<span class="w"> </span>ros2-ibmcloud
<span class="w">    </span>spec:
<span class="w">      </span>containers:
<span class="w">      </span>-<span class="w"> </span>name:<span class="w"> </span>ros2-ibmcloud
<span class="w">        </span>image:<span class="w"> </span>us.icr.io/ros2nasr/ros2foxy:2
</pre></div>
</div>
<p>Deploy the file using the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>ros2-deployment.yaml
deployment.apps/ros2-deployment<span class="w"> </span>created
</pre></div>
</div>
<p>Now your docker image is fully deployed on your cluster!</p>
</section>
</section>
<section id="step-5-using-cli-for-your-docker-image">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Step 5: Using CLI for your Docker Image</a><a class="headerlink" href="#step-5-using-cli-for-your-docker-image" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Navigate to your cluster through the IBM Cloud console Kubernetes.</p></li>
<li><p>Click on <em>Kubernetes dashboard</em> on the top right corner of the page.</p></li>
</ol>
<p>You should now be able to see a full list of all the different
parameters of your cluster as well as its CPU and Memory Usage.</p>
<ol class="arabic simple" start="3">
<li><p>Navigate to <em>Pods</em> and click on your deployment.</p></li>
<li><p>On the top right corner, click on <em>Exec into pod</em></p></li>
</ol>
<p>Now you are inside your docker image! You can source your workspace (if
needed) and run ROS 2! For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ros2-deployment-xxxxxxxx:/opt/ros/overlay_ws#<span class="w"> </span>.<span class="w"> </span>install/setup.sh
root@ros2-deployment-xxxxxxxx:/opt/ros/overlay_ws#<span class="w"> </span>ros2<span class="w"> </span>launch<span class="w"> </span>demo_nodes_cpp<span class="w"> </span>talker_listener.launch.py
</pre></div>
</div>
</section>
<section id="final-remarks">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Final Remarks</a><a class="headerlink" href="#final-remarks" title="Link to this heading"></a></h2>
<p>At this point, you are capable of creating your own docker image using ROS 2 packages on github. It is also possible, with little changes to utilize local ROS 2 packages as well. This could be the topic of another article. However, you are encouraged to check out the following <a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/tree/main/dockers/local_pkgs_docker">Dockerfile</a> which uses a local copy of the demos repository. Similarly, you can use your own local package.</p>
</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Miscellaneous.html" class="btn btn-neutral float-left" title="杂项" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Eclipse-Oxygen-with-ROS-2-and-rviz2.html" class="btn btn-neutral float-right" title="Using Eclipse Oxygen with rviz2 [community-contributed]" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Open Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: humble
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Releases</dt>
        <dd><a href="Deploying-ROS-2-on-IBM-Cloud.html">Humble</a></dd>
    </dl>
    <dl>
      <dt>In Development</dt>
      <dd><a href="../../../rolling/Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">Rolling</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EVD5Z6G6NH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>